<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle Rogue Rich - ç©¶æ¥µã®æ”¾ç½®RPG</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --accent-primary: #38bdf8;
            --accent-secondary: #818cf8;
            --danger: #ef4444;
            --success: #22c55e;
            --gold: #fbbf24;
            --orb: #a855f7;
            --panel-bg: rgba(15, 23, 42, 0.6);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* ã‚²ãƒ¼ãƒ å…¨ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠ */
        .game-wrapper {
            width: 95%;
            max-width: 480px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
        }

        /* --- ä¸Šéƒ¨ï¼šãƒãƒˆãƒ«å®Ÿæ³ã‚¨ãƒªã‚¢ --- */
        .battle-screen {
            flex: 0 0 240px;
            position: relative;
            background: linear-gradient(to bottom, #1e293b, #0f172a);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .stage-info {
            position: absolute;
            top: 15px;
            font-weight: bold;
            letter-spacing: 2px;
            color: var(--accent-primary);
        }

        .units-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            margin-top: 20px;
            position: relative;
        }

        /* ãƒ¦ãƒ‹ãƒƒãƒˆã®è¦–è¦šè¡¨ç¾ */
        .entity {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            width: 120px;
            transition: transform 0.5s ease;
        }

        .avatar {
            font-size: 3rem;
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
        }

        /* é€²è»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šä¸Šä¸‹ã«æºã‚Œã‚‹ */
        .walking {
            animation: bobbing 0.6s infinite ease-in-out;
        }

        @keyframes bobbing {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        /* ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»ãƒ•ãƒ©ãƒƒã‚·ãƒ¥æ¼”å‡º */
        .hit-flash {
            animation: flash 0.2s fast;
        }

        @keyframes flash {
            0% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(3) sepia(1) hue-rotate(-50deg);
            }

            100% {
                filter: brightness(1);
            }
        }

        /* ãƒ€ãƒ¡ãƒ¼ã‚¸æ•°å­—ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— */
        .damage-popup {
            position: absolute;
            color: #ff4757;
            font-weight: bold;
            font-size: 1.2rem;
            pointer-events: none;
            animation: popup 0.8s ease-out forwards;
            text-shadow: 0 0 4px black;
            z-index: 100;
        }

        @keyframes popup {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-50px);
                opacity: 0;
            }
        }

        .hp-container {
            width: 100%;
            height: 10px;
            background: #334155;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }

        .hp-fill {
            height: 100%;
            transition: width 0.1s linear;
        }

        .hp-ally {
            background: var(--accent-primary);
            width: 100%;
        }

        .hp-enemy {
            background: var(--danger);
            width: 100%;
        }

        /* --- ä¸‹éƒ¨ï¼šç®¡ç†ãƒ»å¼·åŒ–ã‚¨ãƒªã‚¢ --- */
        .management-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            background: var(--panel-bg);
            overflow: hidden;
        }

        /* ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-dim);
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: var(--accent-primary);
            color: var(--bg-color);
        }

        .tab-content {
            display: none;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .tab-content.active {
            display: flex;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ç¾åŒ– */
        .tab-content::-webkit-scrollbar {
            width: 4px;
        }

        .tab-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        /* ã‚«ãƒ¼ãƒ‰é¢¨ã‚¢ã‚¤ãƒ†ãƒ  */
        .item-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s;
        }

        .item-card:active {
            transform: scale(0.98);
        }

        .item-icon {
            font-size: 1.8rem;
            width: 40px;
            text-align: center;
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            display: block;
            font-weight: bold;
            font-size: 0.95rem;
        }

        .item-desc {
            display: block;
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        .buy-btn {
            background: var(--accent-primary);
            color: var(--bg-color);
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            min-width: 80px;
        }

        .buy-btn:disabled {
            background: #334155;
            color: var(--text-dim);
            cursor: not-allowed;
        }

        /* ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå›³é‘‘ */
        .artifact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }

        .artifact-slot {
            aspect-ratio: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            position: relative;
            filter: grayscale(1);
            opacity: 0.3;
        }

        .artifact-slot.owned {
            filter: grayscale(0);
            opacity: 1;
            border-color: var(--orb);
            box-shadow: 0 0 10px rgba(168, 85, 247, 0.3);
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼çµ±è¨ˆ */
        .footer-stats {
            margin-top: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .stat-box {
            display: flex;
            flex-direction: column;
        }

        .stat-lbl {
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        .stat-val {
            font-weight: bold;
            font-size: 1rem;
        }

        .color-gold {
            color: var(--gold);
        }

        .color-orb {
            color: var(--orb);
        }

        #return-container {
            margin-top: 10px;
        }

        .return-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--orb), var(--accent-secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div class="game-wrapper">
        <!-- ãƒãƒˆãƒ«ã‚¨ãƒªã‚¢ -->
        <div class="battle-screen">
            <div class="stage-info">STAGE <span id="stage-num">1</span></div>

            <div class="units-container" id="unit-view">
                <!-- å‘³æ–¹ -->
                <div class="entity walking" id="ally-entity">
                    <div class="avatar">ğŸ›¡ï¸</div>
                    <div class="hp-container">
                        <div id="ally-hp-bar" class="hp-fill hp-ally"></div>
                    </div>
                </div>

                <!-- æ•µ -->
                <div class="entity" id="enemy-entity">
                    <div class="avatar" id="enemy-avatar">ğŸ‘¹</div>
                    <div class="hp-container">
                        <div id="enemy-hp-bar" class="hp-fill hp-enemy"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç®¡ç†ã‚¨ãƒªã‚¢ -->
        <div class="management-area">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('units')">å…µå£«é›‡ç”¨</button>
                <button class="tab-btn" onclick="showTab('artifacts')">å®ç‰©å›³é‘‘</button>
            </div>

            <!-- å…µå£«ã‚¿ãƒ– -->
            <div id="units-tab" class="tab-content active">
                <div id="unit-list">
                    <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>

            <!-- ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚¿ãƒ– -->
            <div id="artifacts-tab" class="tab-content">
                <div class="artifact-grid" id="artifact-list">
                    <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>

            <!-- çµ±è¨ˆã¨å¸°é‚„ -->
            <div class="footer-stats">
                <div class="stat-box">
                    <span class="stat-lbl">æ‰€æŒã‚´ãƒ¼ãƒ«ãƒ‰</span>
                    <span id="gold-val" class="stat-val color-gold">0</span>
                </div>
                <div class="stat-box">
                    <span class="stat-lbl">æ‰€æŒã‚ªãƒ¼ãƒ–</span>
                    <span id="orb-val" class="stat-val color-orb">0</span>
                </div>
                <div class="stat-box">
                    <span class="stat-lbl">åˆè¨ˆæ”»æ’ƒåŠ› (DPS)</span>
                    <span id="dps-val" class="stat-val">0</span>
                </div>
                <div class="stat-box">
                    <span class="stat-lbl">ãƒœãƒ¼ãƒŠã‚¹å€ç‡</span>
                    <span id="multi-val" class="stat-val">x1.0</span>
                </div>
            </div>

            <div id="return-container">
                <button class="return-btn" id="return-btn" onclick="handleReturn()">
                    å¸°é‚„ã™ã‚‹ (ç²å¾—äºˆæƒ³: <span id="pending-orbs">0</span>)
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
        const UNIT_TYPES = [
            { id: 'infantry', name: 'æ­©å…µ', icon: 'ğŸ—¡ï¸', baseAtk: 10, baseCost: 15 },
            { id: 'archer', name: 'å¼“å…µ', icon: 'ğŸ¹', baseAtk: 35, baseCost: 100 },
            { id: 'knight', name: 'é¨å£«', icon: 'ğŸ‡', baseAtk: 120, baseCost: 800 }
        ];

        const ARTIFACT_TYPES = [
            { id: 'sword', name: 'é»„é‡‘ã®å‰£', icon: 'âœ¨', desc: 'å…¨æ”»æ’ƒåŠ› +50%', effect: { type: 'atk', value: 0.5 } },
            { id: 'stone', name: 'è³¢è€…ã®çŸ³', icon: 'ğŸ’', desc: 'ã‚´ãƒ¼ãƒ«ãƒ‰ç²å¾—é‡ +100%', effect: { type: 'gold', value: 1.0 } },
            { id: 'boots', name: 'éŸ‹é§„å¤©ã®é´', icon: 'ğŸ‘Ÿ', desc: 'æ”»æ’ƒé–“éš”ãŒæ—©ããªã‚‹ (ä»®)', effect: { type: 'spd', value: 0.2 } },
            { id: 'shield', name: 'è¦‡ç‹ã®ç›¾', icon: 'ğŸ›¡ï¸', desc: 'å‘³æ–¹ã®è€ä¹…åŠ›ã‚¢ãƒƒãƒ—', effect: { type: 'def', value: 0.5 } }
        ];

        const ENEMY_ICONS = ['ğŸ‘¹', 'ğŸ’€', 'ğŸ‘»', 'ğŸ²', 'ğŸ§Ÿ', 'ğŸº', 'ğŸ¦‚'];

        // --- ã‚²ãƒ¼ãƒ çŠ¶æ…‹ ---
        let game = {
            stage: 1,
            gold: 0,
            orbs: 0,
            units: { infantry: 0, archer: 0, knight: 0 },
            artifacts: [], // æ‰€æŒã—ã¦ã„ã‚‹artifactã®IDãƒªã‚¹ãƒˆ
            lastSave: Date.now()
        };

        // ä¸€æ™‚çš„ãªãƒãƒˆãƒ«çŠ¶æ…‹
        let battle = {
            enemyHp: 100,
            enemyMaxHp: 100,
            allyHp: 100,
            allyMaxHp: 100,
            lastTick: Date.now()
        };

        // --- ä¾¿åˆ©é–¢æ•° ---
        const getUnitCost = (id, count) => {
            const type = UNIT_TYPES.find(u => u.id === id);
            return Math.floor(type.baseCost * Math.pow(1.15, count));
        };

        const getStats = () => {
            let rawAtk = 0;
            UNIT_TYPES.forEach(type => {
                rawAtk += type.baseAtk * game.units[type.id];
            });
            if (rawAtk === 0) rawAtk = 5; // åˆæœŸæ”»æ’ƒåŠ›

            let atkMulti = 1.0 + (game.orbs * 0.1); // ã‚ªãƒ¼ãƒ–ãƒœãƒ¼ãƒŠã‚¹
            let goldMulti = 1.0;

            // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆåŠ¹æœ
            game.artifacts.forEach(artId => {
                const art = ARTIFACT_TYPES.find(a => a.id === artId);
                if (art.effect.type === 'atk') atkMulti += art.effect.value;
                if (art.effect.type === 'gold') goldMulti += art.effect.value;
            });

            return { dps: rawAtk * atkMulti, goldMulti };
        };

        // --- ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ ---
        function save() {
            localStorage.setItem('idleRogueRich_Save', JSON.stringify(game));
        }

        function load() {
            const data = localStorage.getItem('idleRogueRich_Save');
            if (data) {
                const parsed = JSON.parse(data);
                game = { ...game, ...parsed };
            }
            initUI();
        }

        // --- UIåˆ¶å¾¡ ---
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');
        }

        function initUI() {
            // ãƒ¦ãƒ‹ãƒƒãƒˆãƒªã‚¹ãƒˆç”Ÿæˆ
            const list = document.getElementById('unit-list');
            list.innerHTML = '';
            UNIT_TYPES.forEach(type => {
                const card = document.createElement('div');
                card.className = 'item-card';
                card.innerHTML = `
                <div class="item-icon">${type.icon}</div>
                <div class="item-info">
                    <span class="item-name">${type.name} (Lv <span id="lv-${type.id}">${game.units[type.id]}</span>)</span>
                    <span class="item-desc">æ”»æ’ƒåŠ›: ${type.baseAtk} / æ¬¡: <span id="cost-${type.id}">${getUnitCost(type.id, game.units[type.id])}</span> G</span>
                </div>
                <button class="buy-btn" id="btn-${type.id}" onclick="buyUnit('${type.id}')">é›‡ç”¨</button>
            `;
                list.appendChild(card);
            });

            // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆå›³é‘‘ç”Ÿæˆ
            const artList = document.getElementById('artifact-list');
            artList.innerHTML = '';
            ARTIFACT_TYPES.forEach(art => {
                const slot = document.createElement('div');
                slot.className = `artifact-slot ${game.artifacts.includes(art.id) ? 'owned' : ''}`;
                slot.innerHTML = art.icon;
                slot.title = `${art.name}: ${art.desc}`;
                artList.appendChild(slot);
            });
        }

        function updateUI() {
            const stats = getStats();
            document.getElementById('stage-num').textContent = game.stage;
            document.getElementById('gold-val').textContent = Math.floor(game.gold);
            document.getElementById('orb-val').textContent = game.orbs;
            document.getElementById('dps-val').textContent = Math.floor(stats.dps);
            document.getElementById('multi-val').textContent = `x${(stats.dps / (UNIT_TYPES.reduce((s, t) => s + t.baseAtk * game.units[t.id], 0) || 5)).toFixed(1)}`;

            UNIT_TYPES.forEach(type => {
                const cost = getUnitCost(type.id, game.units[type.id]);
                document.getElementById(`lv-${type.id}`).textContent = game.units[type.id];
                document.getElementById(`cost-${type.id}`).textContent = cost;
                document.getElementById(`btn-${type.id}`).disabled = game.gold < cost;
            });

            const pending = Math.floor(game.stage / 10);
            document.getElementById('pending-orbs').textContent = pending;
            document.getElementById('return-btn').disabled = game.stage < 10;

            // HPãƒãƒ¼
            document.getElementById('enemy-hp-bar').style.width = (battle.enemyHp / battle.enemyMaxHp * 100) + '%';
            document.getElementById('ally-hp-bar').style.width = (battle.allyHp / battle.allyMaxHp * 100) + '%';
        }

        // --- ãƒ­ã‚¸ãƒƒã‚¯ ---
        function buyUnit(id) {
            const cost = getUnitCost(id, game.units[id]);
            if (game.gold >= cost) {
                game.gold -= cost;
                game.units[id]++;
                updateUI();
                save();
            }
        }

        function createDamageText(amount, xOffset) {
            const container = document.querySelector('.battle-screen');
            const el = document.createElement('div');
            el.className = 'damage-popup';
            el.textContent = `-${Math.floor(amount)}`;
            el.style.left = `calc(50% + ${xOffset}px)`;
            el.style.top = `50%`;
            container.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        function spawnNextEnemy() {
            game.stage++;
            battle.enemyMaxHp = Math.floor(100 * Math.pow(1.25, game.stage - 1));
            battle.enemyHp = battle.enemyMaxHp;

            const avatar = ENEMY_ICONS[Math.floor(Math.random() * ENEMY_ICONS.length)];
            const enemyEl = document.getElementById('enemy-entity');

            // ã‚¹ãƒ©ã‚¤ãƒ‰æ¼”å‡º: ä¸€æ—¦æ¶ˆã—ã¦å³ã‹ã‚‰
            enemyEl.style.transform = 'translateX(100px)';
            enemyEl.style.opacity = '0';

            setTimeout(() => {
                document.getElementById('enemy-avatar').textContent = avatar;
                enemyEl.style.transform = 'translateX(0)';
                enemyEl.style.opacity = '1';
            }, 300);
        }

        function handleReturn() {
            if (confirm('å¸°é‚„ã—ã¦ã‚ªãƒ¼ãƒ–ã¨å®ç‰©ã‚’æ‰‹ã«å…¥ã‚Œã¾ã™ã‹ï¼Ÿï¼ˆé€²è¡ŒçŠ¶æ³ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ï¼‰')) {
                const stats = getStats();
                game.orbs += Math.floor(game.stage / 10);

                // ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆæŠ½é¸ (10% + ã‚¹ãƒ†ãƒ¼ã‚¸ã«å¿œã˜ãŸãƒœãƒ¼ãƒŠã‚¹)
                if (Math.random() < 0.1 + (game.stage / 500)) {
                    const unowned = ARTIFACT_TYPES.filter(a => !game.artifacts.includes(a.id));
                    if (unowned.length > 0) {
                        const picked = unowned[Math.floor(Math.random() * unowned.length)];
                        game.artifacts.push(picked.id);
                        alert(`æ–°ç™ºè¦‹ï¼ã€${picked.name}ã€‘ã‚’æ‰‹ã«å…¥ã‚ŒãŸï¼\nåŠ¹æœ: ${picked.desc}`);
                    }
                }

                game.stage = 1;
                game.gold = 0;
                // ãƒ¦ãƒ‹ãƒƒãƒˆã‚‚ãƒªã‚»ãƒƒãƒˆï¼ˆæ°¸ç¶šå¼·åŒ–ã¯ã‚ªãƒ¼ãƒ–ã¨ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã§è¡Œã†ï¼‰
                Object.keys(game.units).forEach(k => game.units[k] = 0);

                battle.enemyMaxHp = 100;
                battle.enemyHp = 100;
                battle.allyHp = 100;

                initUI();
                updateUI();
                save();
            }
        }

        function gameLoop() {
            const now = Date.now();
            const dt = (now - battle.lastTick) / 1000;
            battle.lastTick = now;

            const stats = getStats();

            // æ•µã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸
            const dmgToEnemy = stats.dps * dt;
            battle.enemyHp -= dmgToEnemy;

            // ãƒ€ãƒ¡ãƒ¼ã‚¸æ¼”å‡º (0.5ç§’ãŠãã«è¡¨ç¤º)
            if (now % 500 < 30) {
                createDamageText(stats.dps / 2, 40);
                document.getElementById('enemy-entity').classList.add('hit-flash');
                setTimeout(() => document.getElementById('enemy-entity').classList.remove('hit-flash'), 200);
            }

            if (battle.enemyHp <= 0) {
                game.gold += 10 * Math.pow(1.2, game.stage - 1) * stats.goldMulti;
                spawnNextEnemy();
            }

            // å‘³æ–¹ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ˆç°¡æ˜“ç‰ˆï¼šã‚¹ãƒ†ãƒ¼ã‚¸ãŒé€²ã‚€ã»ã©ç—›ã„ï¼‰
            const monsterDmg = (5 + game.stage * 1.5) * dt;
            battle.allyHp -= monsterDmg;

            if (battle.allyHp <= 0) {
                // æ•—åŒ—ï¼šã‚¹ãƒ†ãƒ¼ã‚¸å¾Œé€€
                game.stage = Math.max(1, game.stage - 1);
                battle.enemyMaxHp = Math.floor(100 * Math.pow(1.25, game.stage - 1));
                battle.enemyHp = battle.enemyMaxHp;
                battle.allyHp = 100;
            }

            updateUI();
            requestAnimationFrame(gameLoop);
        }

        // --- é–‹å§‹ ---
        load();
        updateUI();
        setInterval(save, 10000); // 10ç§’ã‚ªãƒ¼ãƒˆã‚»ãƒ¼ãƒ–
        requestAnimationFrame(gameLoop);

    </script>

</body>

</html>